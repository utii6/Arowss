<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Arrows Clone Exact</title>
    <style>
        body { margin: 0; background-color: #3d3d4e; display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        canvas { touch-action: none; cursor: pointer; }
        #ui { position: absolute; top: 15%; color: #7a7a8c; font-family: 'Arial', sans-serif; font-weight: bold; font-size: 28px; text-align: center; width: 100%; pointer-events: none; }
        #ui span { display: block; font-size: 18px; margin-top: 5px; opacity: 0.7; }
    </style>
</head>
<body>
    <div id="ui">Arrows<span>Level 265</span></div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // ألوان الفيديو
        const COLORS = {
            bg: '#3d3d4e',
            dot: '#4a4a5a',
            arrowIdle: '#7a7a8c',
            arrowActive: '#ffffff'
        };

        let gridSpacing = 40;
        let arrows = [];

        function init() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // توزيع الأسهم لمحاكاة الفيديو (يمكنك تعديل الإحداثيات هنا)
            arrows = [
                { x: 3, y: 5, dir: 'UP', status: 'idle', length: 40 },
                { x: 5, y: 5, dir: 'RIGHT', status: 'idle', length: 40 },
                { x: 5, y: 8, dir: 'DOWN', status: 'idle', length: 40 },
                { x: 2, y: 8, dir: 'LEFT', status: 'idle', length: 40 },
                { x: 4, y: 6, dir: 'UP', status: 'idle', length: 40 }
            ];
        }

        function drawBackground() {
            ctx.fillStyle = COLORS.bg;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // رسم النقاط (Grid Dots)
            ctx.fillStyle = COLORS.dot;
            for (let x = gridSpacing/2; x < canvas.width; x += gridSpacing) {
                for (let y = gridSpacing/2; y < canvas.height; y += gridSpacing) {
                    ctx.beginPath();
                    ctx.arc(x, y, 1.2, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        function drawArrowHead(x, y, angle, color) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            ctx.strokeStyle = color;
            ctx.lineWidth = 3.5;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            ctx.beginPath();
            ctx.moveTo(-10, -8);
            ctx.lineTo(2, 0);
            ctx.lineTo(-10, 8);
            ctx.stroke();
            ctx.restore();
        }

        function drawArrow(a) {
            const px = a.x * gridSpacing + gridSpacing/2;
            const py = a.y * gridSpacing + gridSpacing/2;
            const color = a.status === 'moving' ? COLORS.arrowActive : COLORS.arrowIdle;
            
            let angle = 0;
            if (a.dir === 'UP') angle = -Math.PI / 2;
            if (a.dir === 'DOWN') angle = Math.PI / 2;
            if (a.dir === 'LEFT') angle = Math.PI;
            if (a.dir === 'RIGHT') angle = 0;

            // رسم ذيل السهم (الجسم)
            ctx.strokeStyle = color;
            ctx.lineWidth = 3.5;
            ctx.beginPath();
            ctx.moveTo(px, py);
            
            // في الفيديو السهم يمتد، هنا نحسب موضع الرأس بناءً على طول السهم
            let headX = px + Math.cos(angle) * 15;
            let headY = py + Math.sin(angle) * 15;
            
            drawArrowHead(headX, headY, angle, color);
        }

        function update() {
            drawBackground();
            arrows.forEach(a => {
                if (a.status === 'moving') {
                    if (a.dir === 'UP') a.y -= 0.2;
                    if (a.dir === 'DOWN') a.y += 0.2;
                    if (a.dir === 'LEFT') a.x -= 0.2;
                    if (a.dir === 'RIGHT') a.x += 0.2;
                    
                    if (a.x < -2 || a.x > 20 || a.y < -2 || a.y > 40) a.status = 'removed';
                }
                if (a.status !== 'removed') drawArrow(a);
            });
            requestAnimationFrame(update);
        }

        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            const tx = (e.clientX - rect.left) / gridSpacing;
            const ty = (e.clientY - rect.top) / gridSpacing;

            arrows.forEach(a => {
                if (Math.hypot(a.x + 0.5 - tx, a.y + 0.5 - ty) < 0.8) {
                    a.status = 'moving';
                }
            });
        });

        window.addEventListener('resize', init);
        init();
        update();
    </script>
</body>
</html>
